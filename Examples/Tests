# Comprehensive test
# true = PASS
# false = FAIL

println (c := f(3,4)...3; c) == {f(3, 4), f(3, 4), f(3, 4)}
println (a...2...3) == {{a, a}, {a, a}, {a, a}}
del c

def f() = ({1, 2, 3, x} | $0 ^ 2 -> define(f(x), sum($0)); f(12) -> $0...5 | $0 % 7 -> (sum($0)!)° -> define(a, $0 % 12345 / 3 * e); cos(log(a) ^ 2) * √((5!)!) * 360°)
println f() == 3.8469136881923674*10^99
del f
del a

println ((1 + (a - 1 - (b - 3)) + 4) == (-1 * b + a + 7))

def bool = ((round random()...5...5)[4][3] -> $0 == 1 || $0 == 0)
println bool == true

println ({1, 2, 3} | $0 > 1 ? (true : false)) == {false, true, true}
println (true && false && b || true || false || d || a) == (true || false && b || d || a)
println x ^ x * x / x == x ^ x
println v + d + c + b + a - b - (d - c + a) - a - v == c * 2 + a * -1
println a ^ x * (0 - a) ^ 3 == a ^ (x + 3) * -1
println a * a * 4 * 3 == a ^ 2 * 12
println a * 4 + a * 3 == a * 7
println (a * 3) ^ 2 == a ^ 2 * 9
println c + (b + a ^ 2 * 2 + a ^ 2 - b) - a ^ 2 * 3 == c
# println cos(12) ^ log(4) % 0.1 + (43 + 33 - 23 * (5 + 47) ^ 2 / 2) == -31019.997164792938
println ((3!)!)° / 4 / pi == 1

x:=factor(f * a * 2 + d * a + c * a + b * a)
println x == (f * 2 + d + c + b) * a
del x

println {log(x), 2, 5 ^ 2} + {1, 3, 4} == {log(x) + 1, 5, 29}

def l1 = {2, 3, 7, x, log(a), g(x)}
def f(x) = x ^ 3 + x * 3 + 4
println f(l1) == {8, 27, 343, x ^ 3, log(a) ^ 3, g(x) ^ 3} + {6, 9, 21, x * 3, log(a) * 3, g(x) * 3} + 4
del f
del l1

println ({1, 2, 3, 4, 5, 6} | (9 ncr $0)) == {9, 36, 84, 126, 126, 84}
println tan(x) * sec(x) * csc(x) * cos(x) ^ 2 == 1
println (2 * x * a) ^ 2 == 4 * (x * a) ^ 2
println (2 ^ x) ^ 3 == 8 ^ x
println (x ^ 2) ^ 3 == x ^ 6

def x = 100
x += √x
println x == 110

def a = 0
a++
println (a += x) == 111
println (a := a % 11) == 1
println !(!true || false) == true
println (a xor b) == (b && !a || a && !b)
println (sum5n({1, 3, 7, 9, 11, 12, 17}) | $0::1) == {1, 3, 9, 12, 17}
del a
del b

def l1 = {1, 1, 2, 2, 3, 3, 3, 4, 2, 6, 9, 49, 107}
println size(l1) == 13

# Test implied multiplicity
println f1(x) == f1(x)
println (a)(b)(c-d) == a*b*(c-d)
println f(b)x == f(b)*x
println 3x3(a) == 3*x3(a)

# Test replace
del x
println ((x ^ 3)'x << x = 3) == 27

# Test matrix
println [[1, 3], [1, 2]][1][1] == 2
println ({[1]} | $0 as list) == {{1}}
